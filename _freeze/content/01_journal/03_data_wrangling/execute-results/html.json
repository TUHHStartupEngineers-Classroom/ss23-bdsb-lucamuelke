{
  "hash": "64750b0aa7e3b36e3f9ee9fbb7dab708",
  "result": {
    "markdown": "---\ntitle: \"Data Wrangling\"\nauthor: \"Joschka Schwarz\"\n---\n\n::: {.cell hash='03_data_wrangling_cache/html/unnamed-chunk-1_09dfe25a8cd6cbd7611fd61d60093764'}\n\n```{.r .cell-code}\nlibrary(vroom)\nlibrary(knitr)\ncol_types <- list(\n  id = col_character(),\n  type = col_character(),\n  number = col_character(),\n  country = col_character(),\n  date = col_date(\"%Y-%m-%d\"),\n  abstract = col_character(),\n  title = col_character(),\n  kind = col_character(),\n  num_claims = col_double(),\n  filename = col_character(),\n  withdrawn = col_double()\n)\n\npatent_tbl <- vroom(\n  file       = \"patent.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: type,\n#> number, country, abstract, title, kind, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nassignee_tbl <- vroom(\n  file       = \"assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: number,\n#> country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\npatent_assignee_tbl <- vroom(\n  file       = \"patent_assignee.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> number, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\npatent_tbl <- vroom(\n  file       = \"patent.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: type,\n#> number, country, abstract, title, kind, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nmerged_df <- merge(patent_tbl, patent_assignee_tbl, by.x = \"id\", by.y = \"patent_id\")\nmerged_df_2 <- merge(merged_df, assignee_tbl, by.x = \"assignee_id\", by.y = \"id\")\n\n\nmost_common_ids <- sort(table(with(merged_df_2, merged_df_2[(type == 2), ])$assignee_id), decreasing=TRUE)[1:10]\n\nmost_common_ids <- names(most_common_ids)\ntop_list <- lapply(most_common_ids, function(x) with(assignee_tbl, array(organization[id == x])))\n\n\n\naugust <- with(merged_df_2, merged_df_2[(date >= \"2014-08-01\" & date <= \"2014-08-31\" & type == 2), ])\nmost_common_august <- names(sort(table(merged_df_2$organization), decreasing=TRUE)[1:10])\n\n\nuspc_tbl <- vroom(\n  file       = \"uspc.tsv\", \n  delim      = \"\\t\", \n  col_types  = col_types,\n  na         = c(\"\", \"NA\", \"NULL\")\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: The following named parsers don't match the column names: id, type,\n#> number, country, date, abstract, title, kind, num_claims, filename, withdrawn\n```\n:::\n\n```{.r .cell-code}\nmerged_df_3 <- merge(merged_df_2, uspc_tbl, by.x = \"id\", by.y = \"patent_id\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: One or more parsing issues, call `problems()` on your data frame for details,\n#> e.g.:\n#>   dat <- vroom(...)\n#>   problems(dat)\n```\n:::\n\n```{.r .cell-code}\nmost_common_world <- names(sort(table(patent_assignee_tbl$assignee_id), decreasing=TRUE)[1:10])\ntop_uspto <- lapply(most_common_world, function(x) with(merged_df_3, array(mainclass_id[assignee_id == x])))\ntop_uspto <- unlist(top_uspto)\ntop_uspto <- names(sort(table(top_uspto), decreasing=TRUE)[1:5])\n\n\nkable(top_list, format = \"markdown\")\n```\n\n::: {.cell-output-display}\n<table class=\"kable_wrapper\">\n<tbody>\n  <tr>\n   <td> \n\n|x                                           |\n|:-------------------------------------------|\n|International Business Machines Corporation |\n\n </td>\n   <td> \n\n|x                     |\n|:---------------------|\n|Microsoft Corporation |\n\n </td>\n   <td> \n\n|x           |\n|:-----------|\n|Google Inc. |\n\n </td>\n   <td> \n\n|x                     |\n|:---------------------|\n|QUALCOMM Incorporated |\n\n </td>\n   <td> \n\n|x          |\n|:----------|\n|Apple Inc. |\n\n </td>\n   <td> \n\n|x                        |\n|:------------------------|\n|General Electric Company |\n\n </td>\n   <td> \n\n|x                                         |\n|:-----------------------------------------|\n|Hewlett-Packard Development Company, L.P. |\n\n </td>\n   <td> \n\n|x                                  |\n|:----------------------------------|\n|AT&T INTELLECTUAL PROPERTY I, L.P. |\n\n </td>\n   <td> \n\n|x                 |\n|:-----------------|\n|Intel Corporation |\n\n </td>\n   <td> \n\n|x                                   |\n|:-----------------------------------|\n|GM Global Technology Operations LLC |\n\n </td>\n  </tr>\n</tbody>\n</table>\n:::\n\n```{.r .cell-code}\nkable(most_common_august, format = \"markdown\")\n```\n\n::: {.cell-output-display}\n|x                                           |\n|:-------------------------------------------|\n|International Business Machines Corporation |\n|Samsung Electronics Co., Ltd.               |\n|Canon Kabushiki Kaisha                      |\n|Sony Corporation                            |\n|Microsoft Corporation                       |\n|Google Inc.                                 |\n|Kabushiki Kaisha Toshiba                    |\n|QUALCOMM Incorporated                       |\n|LG Electronics Inc.                         |\n|Panasonic Corporation                       |\n:::\n\n```{.r .cell-code}\nkable(top_uspto, format = \"markdown\")\n```\n\n::: {.cell-output-display}\n|x   |\n|:---|\n|257 |\n|455 |\n|370 |\n|348 |\n|709 |\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}